#
# This file contains expected test output data generated by PBBT.
#
---
suite: rex.setup
tests:
- suite: install
  tests:
  - sh: sh -c 'python -m venv ./sandbox && ./sandbox/bin/pip install --quiet "pip<10"
      wheel'
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/rex.setup_demo
    stdout: ''
  - read: ./sandbox/lib/python3.8/site-packages/rex.setup_demo-4.1.2.egg-info/rex_init.txt
    data: rex.setup_demo
  - read: ./sandbox/lib/python3.8/site-packages/rex.setup_demo-4.1.2.egg-info/rex_static.txt
    data: /home/andrey/rs/src/rex.setup/sandbox/share/rex/rex.setup_demo
  - read: ./sandbox/lib/python3.8/site-packages/rex.setup_demo-4.1.2.egg-info/rex_bundle.txt
    data: |
      {
        "./www/jquery": [
          "https://raw.github.com/jquery/jquery/1.10.2/MIT-LICENSE.txt#md5=e43aa437a6a1ba421653bd5034333bf9",
          "http://code.jquery.com/jquery-1.10.2.js#md5=91515770ce8c55de23b306444d8ea998",
          "http://code.jquery.com/jquery-1.10.2.min.js#md5=628072e7212db1e8cdacb22b21752cda",
          "http://code.jquery.com/jquery-1.10.2.min.map#md5=6c3ccfc221d36777d383b6e04d0b8af9"
        ],
        "./www/bootstrap": [
          "https://raw.github.com/twbs/bootstrap/v3.0.0/LICENSE#md5=e23fadd6ceef8c618fc1c65191d846fa",
          "https://github.com/twbs/bootstrap/releases/download/v3.0.0/bootstrap-3.0.0-dist.zip#md5=6b17c05bb1a1ddb123b7cadea187ff68"
        ],
        "./www/doc": [
          "doc:html",
          "doc:latex"
        ]
      }
  - sh: ls -R ./lib/python3.8/site-packages/rex
    stdout: |
      ./lib/python3.8/site-packages/rex:
      __pycache__
      setup_demo.py

      ./lib/python3.8/site-packages/rex/__pycache__:
      setup_demo.cpython-38.pyc
  - sh: ls ./share/rex
    stdout: |
      rex.setup_demo
  - sh: ls ./share/rex/rex.setup_demo
    stdout: |
      www
  - sh: ls ./share/rex/rex.setup_demo/www
    stdout: |
      _access.yaml
      bootstrap
      doc
      index.html
      jquery
  - sh: ls ./share/rex/rex.setup_demo/js
    stdout: |
      lib
      package.json
  - sh: ls ./share/rex/rex.setup_demo/js/node_modules
    stdout: |
      bootstrap
      jquery
- suite: develop
  tests:
  - sh: sh -c 'python -m venv ./sandbox && ./sandbox/bin/pip install --quiet "pip<10"
      wheel'
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q -e ./src/rex.setup_demo
    stdout: ''
  - read: ./sandbox/src/rex.setup_demo/src/rex.setup_demo.egg-info/rex_init.txt
    data: rex.setup_demo
  - read: ./sandbox/src/rex.setup_demo/src/rex.setup_demo.egg-info/rex_static.txt
    data: /home/andrey/rs/src/rex.setup/sandbox/share/rex/rex.setup_demo
  - read: ./sandbox/lib/python3.8/site-packages/rex/__init__.py
    data: |
      __import__('pkg_resources').declare_namespace(__name__)
  - sh: ls ./share/rex
    stdout: |
      rex.setup_demo
  - sh: ls ./share/rex/rex.setup_demo
    stdout: |
      js
      www
  - sh: ls ./share/rex/rex.setup_demo/www
    stdout: |
      _access.yaml
      bootstrap
      doc
      index.html
      jquery
  - sh: ls ./share/rex/rex.setup_demo/js
    stdout: |
      lib
      node_modules
      package.json
      yarn.lock
  - sh: ls ./share/rex/rex.setup_demo/js/node_modules
    stdout: |
      bootstrap
      jquery
- suite: sdist
  tests:
  - sh: sh -c 'python -m venv ./sandbox && ./sandbox/bin/pip install --quiet "pip<10"
      wheel'
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ../../bin/python setup.py -q sdist --format=zip
    stdout: ''
  - sh: unzip -q ./src/rex.setup_demo/dist/rex.setup_demo-4.1.2.zip
    stdout: ''
  - sh: sh -c "find './rex.setup_demo-4.1.2' -type d -not -wholename './rex.setup_demo-4.1.2/static/www/bundle/*'
      | sort | while read dir; do echo === $dir ===; ls $dir | sort; done"
    stdout: |
      === ./rex.setup_demo-4.1.2 ===
      PKG-INFO
      README
      setup.cfg
      setup.py
      src
      static
      === ./rex.setup_demo-4.1.2/src ===
      rex
      rex.setup_demo.egg-info
      === ./rex.setup_demo-4.1.2/src/rex ===
      __init__.py
      setup_demo.py
      === ./rex.setup_demo-4.1.2/src/rex.setup_demo.egg-info ===
      PKG-INFO
      SOURCES.txt
      dependency_links.txt
      namespace_packages.txt
      rex_bundle.txt
      rex_init.txt
      rex_static.txt
      top_level.txt
      === ./rex.setup_demo-4.1.2/static ===
      js
      www
      === ./rex.setup_demo-4.1.2/static/js ===
      lib
      package.json
      === ./rex.setup_demo-4.1.2/static/js/lib ===
      index.js
      index.less
      === ./rex.setup_demo-4.1.2/static/www ===
      _access.yaml
      bootstrap
      doc
      index.html
      jquery
      === ./rex.setup_demo-4.1.2/static/www/bootstrap ===
      LICENSE
      css
      fonts
      js
      === ./rex.setup_demo-4.1.2/static/www/bootstrap/css ===
      bootstrap-theme.css
      bootstrap-theme.min.css
      bootstrap.css
      bootstrap.min.css
      === ./rex.setup_demo-4.1.2/static/www/bootstrap/fonts ===
      glyphicons-halflings-regular.eot
      glyphicons-halflings-regular.svg
      glyphicons-halflings-regular.ttf
      glyphicons-halflings-regular.woff
      === ./rex.setup_demo-4.1.2/static/www/bootstrap/js ===
      bootstrap.js
      bootstrap.min.js
      === ./rex.setup_demo-4.1.2/static/www/doc ===
      Makefile
      _sources
      _static
      environment.pickle
      footnotehyper-sphinx.sty
      genindex.html
      index.doctree
      index.html
      latexmkjarc
      latexmkrc
      objects.inv
      python.ist
      search.html
      searchindex.js
      setup_demo.aux
      setup_demo.fdb_latexmk
      setup_demo.fls
      setup_demo.idx
      setup_demo.ilg
      setup_demo.ind
      setup_demo.log
      setup_demo.out
      setup_demo.pdf
      setup_demo.tex
      setup_demo.toc
      sphinx.sty
      sphinxhighlight.sty
      sphinxhowto.cls
      sphinxmanual.cls
      sphinxmulticell.sty
      === ./rex.setup_demo-4.1.2/static/www/doc/_sources ===
      index.rst.txt
      === ./rex.setup_demo-4.1.2/static/www/doc/_static ===
      ajax-loader.gif
      basic.css
      comment-bright.png
      comment-close.png
      comment.png
      doctools.js
      documentation_options.js
      down-pressed.png
      down.png
      file.png
      jquery-3.2.1.js
      jquery.js
      minus.png
      plus.png
      pygments.css
      rextheme.css
      rextheme.js
      searchtools.js
      underscore-1.3.1.js
      underscore.js
      up-pressed.png
      up.png
      websupport.js
      === ./rex.setup_demo-4.1.2/static/www/jquery ===
      MIT-LICENSE.txt
      jquery-1.10.2.js
      jquery-1.10.2.min.js
      jquery-1.10.2.min.map
- suite: sdist
  tests:
  - sh: sh -c 'python -m venv ./sandbox && ./sandbox/bin/pip install --quiet "pip<10"
      wheel'
    stdout: ''
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./sandbox/src; cp -a ./demo ./sandbox/src/rex.setup_demo'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q wheel
    stdout: ''
  - sh: ../../bin/python setup.py -q bdist_wheel
    stdout: |
      Skipping installation of build/bdist.linux-x86_64/wheel/rex/__init__.py (namespace package)
  - sh: ./bin/pip install -q ./src/rex.setup_demo/dist/rex.setup_demo-4.1.2-py3-none-any.whl
    stdout: ''
  - sh: ls ./lib/python3.8/site-packages/rex
    stdout: |
      __pycache__
      setup_demo.py
  - sh: ls ./share/rex
    stdout: |
      rex.setup_demo
  - sh: ls ./share/rex/rex.setup_demo
    stdout: |
      www
  - sh: ls ./share/rex/rex.setup_demo/www
    stdout: |
      _access.yaml
      bootstrap
      doc
      index.html
      jquery
  - sh: ls ./share/rex/rex.setup_demo/js
    stdout: |
      lib
      node_modules
      package.json
      yarn.lock
  - sh: ls ./share/rex/rex.setup_demo/js/node_modules
    stdout: |
      bootstrap
      jquery
- suite: js_basic
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/basic ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      js
- suite: js_basic_shrinkwrap
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/basic_shrinkwrap ./src/pkg'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      js
- suite: js_rex_bundle_all
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/rex_bundle_all ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      js
- suite: js_react_npm
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/react_npm ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/js
    stdout: |
      lib
      node_modules
      package.json
      yarn.lock
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      js
- suite: js_react_no_bundle
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/react_no_bundle ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/js
    stdout: |
      lib
      package.json
- suite: js_style_entry
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/style_entry ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      css
      js
- suite: js_style_implicit
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/style_implicit ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      css
      js
- suite: js_rex_style
  tests:
  - sh: ./bin/pip install -q -e ..
    stdout: ''
  - sh: sh -c 'mkdir ./src && cp -a ../test/fixtures/rex_style ./src/pkg'
    stdout: ''
  - sh: find sandbox '(' -wholename 'rex.setup_demo/static/www/jquery' -o -wholename
      'rex.setup_demo/static/www/bootstrap' -o -wholename 'rex.setup_demo/static/www/doc'
      -o -wholename 'static/www/bundle' -o -name node_modules -o -name bower_components
      ')' -exec rm -rf '{}' ';'
    stdout: ''
  - sh: ./bin/pip install -q ./src/pkg
    stdout: ''
  - sh: ls ./share/rex/pkg/www/bundle
    stdout: |
      asset-manifest.json
      css
      js
